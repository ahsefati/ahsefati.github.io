<!DOCTYPE html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Tinaio Realtime System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/jquery.minicolors.css">
    <link rel="stylesheet" href="css/jquery.fancybox.css">
    <script src="js/jquery_min.js"></script>
    <script src="js/amirhosseinsefati.js"></script>
    <script>
        var USERNAME;
        var PASSWORD;
        var MAINFILE;
        var isAuth;
        var userSubTopicArrayR = [];

        var userSubTopicArrayMain = [];
        var userSubTopicCodeArray = [];
        var userNodeAbilitiesArray = []
        var userNodeImage;
        var codeTable;
        var eachCode = [];

        var userSubNameArray = [];
        var groupSubNameArray = [];
        var uniqueGropuNameArray = []
    </script>

    <script>
        getMainFile = function() {

            $.ajax({
                url: 'users.txt',
                success: function(data) {
                    var nData = data.split("\n");
                    console.log(nData)
                    MAINFILE = nData;
                }
            });

            $.ajax({
                url: "table/table.txt",
                success: function(codeData) {
                    var nCodeData = codeData.split("\n")
                    codeTable = nCodeData
                }
            });

        }
        getMainFile();
    </script>




    <style>
        * {
            font-family: 'iransans';
            src: url('css/IRANSans.ttf');
        }
        
        .footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 100%;
            background-color: rgb(18, 156, 29);
            color: white;
            text-align: center;
            font-family: 'iransans';
            margin-top: 100px;
        }
        
        #loading {
            background-color: #25e92f;
            height: 100%;
            width: 100%;
            position: fixed;
            z-index: 1;
            margin-top: 0px;
            top: 0px;
        }
        
        #loading-center {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        #loading-center-absolute {
            position: absolute;
            left: 50%;
            top: 50%;
            height: 200px;
            width: 200px;
            margin-top: -100px;
            margin-left: -100px;
        }
        
        .object {
            width: 50px;
            height: 50px;
            background-color: rgba(255, 255, 255, 0);
            margin-right: auto;
            margin-left: auto;
            border: 4px solid #FFF;
            left: 73px;
            top: 73px;
            position: absolute;
        }
        
        #first_object {
            -webkit-animation: first_object_animate 1s infinite ease-in-out;
            animation: first_object_animate 1s infinite ease-in-out;
        }
        
        #second_object {
            -webkit-animation: second_object 1s forwards, second_object_animate 1s infinite ease-in-out;
            animation: second_object 1s forwards, second_object_animate 1s infinite ease-in-out;
        }
        
        #third_object {
            -webkit-animation: third_object 1s forwards, third_object_animate 1s infinite ease-in-out;
            animation: third_object 1s forwards, third_object_animate 1s infinite ease-in-out;
        }
        
        @-webkit-keyframes second_object {
            100% {
                width: 100px;
                height: 100px;
                left: 48px;
                top: 48px;
            }
        }
        
        @keyframes second_object {
            100% {
                width: 100px;
                height: 100px;
                left: 48px;
                top: 48px;
            }
        }
        
        @-webkit-keyframes third_object {
            100% {
                width: 150px;
                height: 150px;
                left: 23px;
                top: 23px;
            }
        }
        
        @keyframes third_object {
            100% {
                width: 150px;
                height: 150px;
                left: 23px;
                top: 23px;
            }
        }
        
        @-webkit-keyframes first_object_animate {
            0% {
                -webkit-transform: perspective(100px);
            }
            50% {
                -webkit-transform: perspective(100px) rotateY(-180deg);
            }
            100% {
                -webkit-transform: perspective(100px) rotateY(-180deg) rotateX(-180deg);
            }
        }
        
        @keyframes first_object_animate {
            0% {
                transform: perspective(100px) rotateX(0deg) rotateY(0deg);
                -webkit-transform: perspective(100px) rotateX(0deg) rotateY(0deg);
            }
            50% {
                transform: perspective(100px) rotateX(-180deg) rotateY(0deg);
                -webkit-transform: perspective(100px) rotateX(-180deg) rotateY(0deg);
            }
            100% {
                transform: perspective(100px) rotateX(-180deg) rotateY(-180deg);
                -webkit-transform: perspective(100px) rotateX(-180deg) rotateY(-180deg);
            }
        }
        
        @-webkit-keyframes second_object_animate {
            0% {
                -webkit-transform: perspective(200px);
            }
            50% {
                -webkit-transform: perspective(200px) rotateY(180deg);
            }
            100% {
                -webkit-transform: perspective(200px) rotateY(180deg) rotateX(180deg);
            }
        }
        
        @keyframes second_object_animate {
            0% {
                transform: perspective(200px) rotateX(0deg) rotateY(0deg);
                -webkit-transform: perspective(200px) rotateX(0deg) rotateY(0deg);
            }
            50% {
                transform: perspective(200px) rotateX(180deg) rotateY(0deg);
                -webkit-transform: perspective(200px) rotateX(180deg) rotateY(0deg);
            }
            100% {
                transform: perspective(200px) rotateX(180deg) rotateY(180deg);
                -webkit-transform: perspective(200px) rotateX(180deg) rotateY(180deg);
            }
        }
        
        @-webkit-keyframes third_object_animate {
            0% {
                -webkit-transform: perspective(300px);
            }
            50% {
                -webkit-transform: perspective(300px) rotateY(-180deg);
            }
            100% {
                -webkit-transform: perspective(300px) rotateY(-180deg) rotateX(-180deg);
            }
        }
        
        @keyframes third_object_animate {
            0% {
                transform: perspective(300px) rotateX(0deg) rotateY(0deg);
                -webkit-transform: perspective(300px) rotateX(0deg) rotateY(0deg);
            }
            50% {
                transform: perspective(300px) rotateX(-180deg) rotateY(0deg);
                -webkit-transform: perspective(300px) rotateX(-180deg) rotateY(0deg);
            }
            100% {
                transform: perspective(300px) rotateX(-180deg) rotateY(-180deg);
                -webkit-transform: perspective(300px) rotateX(-180deg) rotateY(-180deg);
            }
        }
    </style>


</head>

<style>
    * {
        font-family: 'iransans';
        src: url('css/IRANSans.ttf');
    }
</style>


<body style="font-family='iransans';margin-bottom: 1%;">


    <div id="loading">
        <div id="loading-center">
            <div id="loading-center-absolute">
                <div class="object" id="first_object"></div>
                <div class="object" id="second_object"></div>
                <div class="object" id="third_object"></div>

            </div>
        </div>

    </div>

    <script>
        setTimeout(function() {
            document.getElementById("loading").style.display = "none"
            document.getElementById("loading").style.visibility = "hidden"
            document.getElementById("beforeLogin").style.display = "block"
            document.getElementById("beforeLogin").style.visibility = "visible"
        }, 3000);
    </script>



    <div style="background-size: 100% 100% ;background-image: url('assets/IoTBack.gif')" id="beforeLogin" class="notconnected" hidden>

        <style>
            .content {
                margin: auto;
                background: rgb(14, 175, 27);
            }
            
            .button {
                background-color: #4CAF50;
                border: none;
                color: white;
                padding: 15px 32px;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                margin: 4px 2px;
                cursor: pointer;
            }
            
            a:hover {
                color: rgb(255, 255, 255);
                background-color: #4CAF50;
            }
            
            .buttonSignup {
                background-color: rgb(11, 159, 245);
                border: none;
                color: white;
                text-align: center;
                text-decoration: none;
                display: inline-block;
                font-size: 16px;
                width: auto;
                height: auto;
                cursor: pointer;
                padding: 2px;
                margin-bottom: 0.5%;
                align-content: center;
            }
        </style>
        <img style="margin-left: 35%;margin-top: 3%;height:30% ; width: 30%;" src="assets/logo.png">

        <div class="content logincard">
            <div style=" float: right; font-family: 'iransans'; direction: rtl;" class="container">

                <h4 dir="rtl" style=" float: right; font-family: 'iransans'; direction: rtl;"> نام کاربری : </h4>
                <input id="username" type="text" name="username" value="ahs">
                <h4 dir="rtl" style=" float: right; font-family: 'iransans'; direction: rtl;"> رمز عبور : </h4>
                <input id="password" type="password" name="password" value="159951">

                <input class="button" style="margin-left: 37%" type="button" value="ورود به سیستم" onclick="login()">

            </div>
            <span style="font-family: 'iransans'; direction: rtl;" id="">
                <a style="font-size: 120%;" class="buttonSignup" href="http://tinaio.ir/customerLogin/signup.html"> ثبت نام </a>
                <a style="font-size: 120%;" class="buttonSignup" href="http://tinaio.ir"> بازگشت به تینایو </a>  
                <br><br>
                <p style="direction: rtl;font-family: 'iransans';text-align: justify;" >
                <b>
                    آیا میدانید که با استفاده از محصولات تینایو طول عمر وسایل الکترونیکی شما تا 2 برابر افزایش می یابد ؟
                </b>
                </p>
            </span>
        </div>

        <style>
            .charts {
                height: 300px;
                width: 100%;
                margin-top: 1%;
                visibility: hidden;
                display: none;
                background-color: #4CAF50
            }
        </style>


        <!-- check box ON OFF -->
        <style>
            .onoffswitch {
                margin-top: 7%;
                margin-bottom: 2%;
                margin-left: 24%;
                margin-right: 24%;
                float: right;
                position: relative;
                width: 50%;
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                font-family: 'iransans';
            }
            
            .onoffswitch-checkbox {
                display: none;
            }
            
            .onoffswitch-label {
                display: block;
                overflow: hidden;
                cursor: pointer;
                border: 2px solid #FFFFFF;
                border-radius: 50%;
            }
            
            .onoffswitch-inner {
                display: block;
                width: 100%;
                margin-left: -100%;
                transition: margin 0.3s ease-in 0s;
            }
            
            .onoffswitch-inner:before,
            .onoffswitch-inner:after {
                display: block;
                float: left;
                width: 50%;
                height: 48px;
                padding: 0;
                line-height: 48px;
                font-size: 23px;
                color: white;
                font-family: Trebuchet, Arial, sans-serif;
                font-weight: bold;
                box-sizing: border-box;
            }
            
            .onoffswitch-inner:before {
                font-family: 'iransans';
                content: "";
                padding-left: 10%;
                padding-right: 10%;
                background-color: #D0DFE0;
                color: #3B663F;
            }
            
            .onoffswitch-inner:after {
                font-family: 'iransans';
                content: "";
                padding-right: 10%;
                background-color: #D0DFE0;
                color: #FF0000;
                text-align: right;
            }
            
            .onoffswitch-switch {
                display: block;
                width: 29px;
                margin: 9.5px;
                background: #FF0000;
                position: absolute;
                top: 0;
                bottom: 0;
                right: 91px;
                border: 2px solid #FFFFFF;
                border-radius: 30px;
                transition: all 0.3s ease-in 0s;
            }
            
            .onoffswitch-checkbox:checked+.onoffswitch-label .onoffswitch-inner {
                margin-left: 0;
            }
            
            .onoffswitch-checkbox:checked+.onoffswitch-label .onoffswitch-switch {
                right: 0px;
                background-color: #00FC0D;
            }
        </style>



        <script>
            function login() {
                USERNAME = document.getElementById("username").value
                PASSWORD = document.getElementById("password").value
                getMainFile();
                // console.log(MAINFILE)
                for (var i = 0; i < MAINFILE.length; i = i + 2) {
                    console.log(MAINFILE[i])
                    console.log(MAINFILE[i + 1])
                    if (MAINFILE[i] == USERNAME && MAINFILE[i + 1] == PASSWORD) {
                        isAuth = true
                    }
                }
                if (isAuth) {
                    document.getElementById("beforeLogin").style.visibility = "hidden"
                    document.getElementById("beforeLogin").style.display = "none"

                    document.getElementById("simplified1").style.visibility = "visible"
                    document.getElementById("simplified1").style.display = "block"



                    websocketclient.connect()
                    $.ajax({
                        url: "users/" + USERNAME + ".txt",
                        success: function(userData) {
                            var userTopicArray = userData.split("\n");
                            for (var titer = 0; titer < userTopicArray.length; titer++) {
                                userSubTopicArrayR.push(userTopicArray[titer].split("%")[0]); //not ok yet!
                                console.log("Row Arrayssssssssssssssssssss :")
                                console.log(userSubTopicArrayR)

                                userSubTopicArrayMain.push(userSubTopicArrayR[titer].split(":")[0]);
                                console.log("main topic Arrayssssssssssssssssssss :")
                                console.log(userSubTopicArrayMain)

                                userSubTopicCodeArray.push(userSubTopicArrayR[titer].split(":")[1]);

                                userSubNameArray.push(userTopicArray[titer].split("%")[1]); //ok
                                groupSubNameArray.push(userTopicArray[titer].split("%")[2]); //ok
                            }



                            $.each(groupSubNameArray, function(i, el) {
                                if ($.inArray(el, uniqueGropuNameArray) === -1) uniqueGropuNameArray.push(el);
                            });
                            console.log("uniiiiiiiiiiiiiiiiiiiiiiiiiique : ")
                            console.log(uniqueGropuNameArray)

                            //simplified                                  NOT OK!!!!!!!!!!!
                            for (var i = 0; i < userSubTopicArrayMain.length; i++) {
                                const mDiv = document.createElement('div');
                                mDiv.id = "" + i + "/chartDiv";
                                mDiv.style.fontFamily = "iransans";
                                mDiv.onclick = showChart;
                                const childDiv = document.createElement('div'); //properties of node

                                const imgDiv = document.createElement('img'); //image of node


                                imgDiv.setAttribute("alt", "Tinaio Image Proccessing");


                                mDiv.appendChild(imgDiv)
                                const name = document.createElement('h3') //name of node (in //properties)
                                name.style.fontFamily = 'iransans'
                                name.style.textAlign = "center";
                                name.innerText = userSubNameArray[i];
                                name.id = "" + i + "/nameOfDiv"
                                childDiv.appendChild(name);
                                console.log("coooooooooooooooooode : ")
                                console.log(userSubTopicCodeArray)
                                var code = userSubTopicCodeArray[i]
                                for (var ability = 0; ability < codeTable.length; ability++) {
                                    var codes = codeTable[ability].split(":")[0];
                                    console.log("cooooooooooodes : " + codes)
                                    if (code == codes) {
                                        var abilitiesArray = []
                                        console.log("ok i am in IF nooooooooooooooooooooow")
                                        var abilitiesArray = codeTable[ability].split(":")[1].split("/")
                                        console.log("immmmmmmmmmmmmmmmmmmmmmage : " + abilitiesArray[abilitiesArray.length - 1])
                                        imgDiv.setAttribute("src", "assets/" + abilitiesArray[abilitiesArray.length - 1]);
                                        for (var el = 0; el < abilitiesArray.length - 1; el++) {
                                            console.log("yes im in for loop")
                                            const proValueDiv = document.createElement("h5")
                                            proValueDiv.style.fontFamily = 'iransans'
                                            proValueDiv.style.direction = 'rtl'
                                            proValueDiv.style.width = "auto"
                                            proValueDiv.style.textAlign = "center"
                                            proValueDiv.id = userSubTopicArrayMain[i] + "/" + abilitiesArray[el]
                                            proValueDiv.innerText = "30"

                                            const proTextDiv = document.createElement("h5")
                                            proTextDiv.style.fontFamily = 'iransans'
                                            proTextDiv.style.width = "auto"
                                            proTextDiv.style.direction = 'rtl'
                                            proTextDiv.style.textAlign = "center"
                                            if (abilitiesArray[el] == "temp") {
                                                console.log("oooooooooooooooooooooooooooooookkkkkkkkkkkk")
                                                proTextDiv.innerText = "دما :"
                                            }
                                            if (abilitiesArray[el] == "humid") {
                                                proTextDiv.innerText = "رطوبت :"
                                            }
                                            if (abilitiesArray[el] == "light") {
                                                proTextDiv.innerText = "نور :"
                                            }
                                            if (abilitiesArray[el] == "power") {
                                                proTextDiv.innerText = "مصرف :"
                                            }

                                            const thirdDiv = document.createElement('div')
                                            const fourthDiv = document.createElement('div')
                                            var size = (100 / abilitiesArray.length) - 2;
                                            console.log("ssssssssssssssssssize :  " + size)

                                            thirdDiv.style.width = "49%"
                                            thirdDiv.style.float = "right";

                                            fourthDiv.style.width = "49%"
                                            fourthDiv.style.float = "right";

                                            thirdDiv.appendChild(proTextDiv);
                                            fourthDiv.appendChild(proValueDiv);


                                            childDiv.appendChild(thirdDiv);
                                            childDiv.appendChild(fourthDiv);

                                            childDiv.className = 'container';

                                        }

                                    }
                                }

                                const checkDiv = document.createElement('div')
                                checkDiv.className = 'onoffswitch'

                                const checkInp = document.createElement('input')
                                checkInp.type = "checkbox"
                                checkInp.onclick = sendOnOff;
                                checkInp.name = "onoffswitch"
                                checkInp.className = 'onoffswitch-checkbox'
                                var userPubTopic = userSubTopicArrayMain[i].slice(2);
                                console.log("user publish topic " + userPubTopic)
                                checkInp.id = userPubTopic + "/onoff"
                                checkInp.defaultChecked = "true"
                                const checkLab = document.createElement('label')
                                checkLab.className = 'onoffswitch-label'
                                checkLab.htmlFor = userPubTopic + "/onoff"
                                const checkSpan1 = document.createElement('span')
                                checkSpan1.className = 'onoffswitch-inner'
                                const checkSpan2 = document.createElement('span')
                                checkSpan2.className = 'onoffswitch-switch'

                                checkDiv.id = userPubTopic + "/onoff" + "/checkDiv"

                                checkLab.appendChild(checkSpan1)
                                checkLab.appendChild(checkSpan2)
                                checkDiv.appendChild(checkInp)
                                checkDiv.appendChild(checkLab)

                                childDiv.appendChild(checkDiv);

                                mDiv.appendChild(childDiv);

                                mDiv.className = 'card';

                                document.getElementById("simplified2").appendChild(mDiv);
                            }

                            for (var i = 0; i < (userSubTopicArrayMain.length); i = i + 1) {
                                chartDiv = document.createElement('div');
                                chartDiv.id = "" + i + "/chart";
                                chartDiv.style.visibility = "hidden";
                                chartDiv.style.display = "none";
                                chartDiv.classname = "charts";

                                document.getElementById("mainCharts").appendChild(chartDiv);

                            }

                            for (var i = 0; i < uniqueGropuNameArray.length; i++) {
                                const firstDiv = document.createElement('div');
                                firstDiv.style.fontFamily = 'iransans'
                                firstDiv.id = "" + i + "/firstDiv";
                                firstDiv.onclick = showSubGroups;
                                const firstChildDiv = document.createElement('div');

                                const groupName = document.createElement('h2')
                                groupName.style.textAlign = "center";
                                groupName.innerText = uniqueGropuNameArray[i];
                                groupName.style.fontFamily = 'iransans'
                                groupName.id = "" + i + "/nameOfFirstDiv"

                                firstDiv.className = 'maincards';
                                firstChildDiv.className = 'container';

                                firstChildDiv.appendChild(groupName);
                                firstDiv.appendChild(firstChildDiv);
                                document.getElementById("simplified1").appendChild(firstDiv);


                            }

                            console.log("jcbaskckdahcjksdhkhshlahslhahlhdldhlkshdlhbvweb ewefs")
                            fillCharts();

                        }
                    });

                    setTimeout(function() {
                        for (var i = 0; i < userSubTopicArrayR.length; i++) {
                            var rndColor = websocketclient.getRandomColor();
                            $("#colorChooser").minicolors('value', rndColor);
                            websocketclient.subscribe(userSubTopicArrayMain[i] + "/#", parseInt("0"), $('#colorChooser').val().substring(1))
                        }

                    }, 2000);

                    console.log("Reading Info Completed")
                } else {
                    alert("Wrong Username or Password!") //001 ERROR
                }
                document.getElementById("footer").style.display = "none"
                document.getElementById("footer").style.visibility = "hidden"

            }
        </script>

    </div>

    <div id="afterLogin" hidden>

        <body class="notconnected">


            <div>
                <a href="http://www.tinaio.com"><img id="headerlogo" src="assets/logo.png"></a>
                <span id="headertitle"><button onclick="simplified1()" > Go to simplified... </button></span>
            </div>

            <div id="content" class="row">
                <div id="connection" class="row large-12 columns">

                    <div class="large-8 columns conniTop">
                        <h3>Connection</h3>
                    </div>

                    <div class="large-1 columns conniStatus">
                        <div id="connectionStatus"></div>
                    </div>

                    <div class="large-2 columns conniArrow">
                        <a class="small bottom conniArrow" onclick="websocketclient.render.toggle('conni');">
                            <div class="icon-arrow-chevron"></div>
                        </a>
                    </div>
                    <div class="large-12 columns" id="conniMain">
                        <div class="panel">
                            <div class="row">
                                <form class="custom">
                                    <div class="large-5 columns" hidden>
                                        <label>Host *</label>
                                        <input id="urlInput" type="text" value="broker.mqttdashboard.com">
                                    </div>

                                    <div class="large-1 columns" hidden>
                                        <label>Port *</label>
                                        <input id="portInput" type="text" value="8000" />
                                    </div>

                                    <div class="large-4 columns" hidden>
                                        <label>ClientID *</label>
                                        <input id="clientIdInput" type="text" />
                                    </div>

                                    <div class="large-2 columns">
                                        <a id="connectButton" class="large button" onclick="websocketclient.connect(); connect()">Connect</a>

                                        <script>
                                            function connect() {

                                                websocketclient.subscribe(USERNAME + "/0/0/#", parseInt("0"), $('#colorChooser').val().substring(1))
                                            }
                                        </script>

                                    </div>

                                    <div class="large-2 columns">
                                        <a id="disconnectButton" class="small button" onclick="websocketclient.disconnect();">Disconnect</a>
                                    </div>

                                    <!-- Need for Later!!!!!!!!!!! -->
                                    <div class="large-4 columns" hidden>
                                        <label>Username</label>
                                        <input id="userInput" type="text" />
                                    </div>

                                    <div class="large-3 columns" hidden>
                                        <label>Password</label>
                                        <input id="pwInput" type="password" />
                                    </div>

                                    <div class="large-2 columns" hidden>
                                        <label>Keep Alive</label>
                                        <input id="keepAliveInput" type="text" value="2000" />
                                    </div>

                                    <div class="large-1 columns" hidden>
                                        <label>SSL</label>
                                        <input id="sslInput" type="checkbox" />
                                    </div>

                                    <div class="large-2 columns" hidden>
                                        <label>Clean Session</label>
                                        <input class="checky" id="cleanSessionInput" type="checkbox" checked="checked" disabled="disabled" />
                                    </div>

                                    <div class="large-8 columns" hidden>
                                        <label>Last-Will Topic</label>
                                        <input id="lwTopicInput" type="text" />
                                    </div>

                                    <div class="large-2 columns" hidden>
                                        <label>Last-Will QoS</label>
                                        <select id="lwQosInput">
                            <option>0</option>
                            <option>1</option>
                            <option>2</option>
                        </select>
                                    </div>

                                    <div class="large-2 columns" hidden>
                                        <label>Last-Will Retain</label>
                                        <input class="checky" id="LWRInput" type="checkbox" />
                                    </div>

                                    <div class="large-12 columns" hidden>
                                        <label>Last-Will Messsage</label>
                                        <textarea id="LWMInput"></textarea>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="empty"></div>
                <div id="publish-sub" class="row large-3 columns">
                    <div class="columns large-8">
                        <div class="large-9 columns publishTop">
                            <h3>Control Clients</h3>
                        </div>

                        <div class="large-3 columns publishArrow">
                            <a class="small bottom publishArrow" onclick="websocketclient.render.toggle('publish');">
                                <div class="icon-arrow-chevron"></div>
                            </a>
                        </div>

                        <div class="large-6 columns" id="publishMain">

                            <!-- Grid Example -->
                            <div class="row panel" id="publishPanel">
                                <div class="large-2 columns">
                                    <a id="commandBTN" class="large button" id="publishButton" onclick="command() ">On</a>
                                    <script>
                                        function command() {
                                            var command = document.getElementById("commandBTN").innerHTML
                                            websocketclient.publish(USERNAME + "/command", command, parseInt("0"), false)
                                            console.log("Command Sent!")
                                            if (command == "On") {
                                                document.getElementById("commandBTN").innerHTML = "Off"

                                            } else {
                                                document.getElementById("commandBTN").innerHTML = "On"
                                            }

                                        }
                                    </script>

                                </div>
                            </div>
                        </div>
                        <div class="empty"></div>
                        <div class="large-9 columns messagesTop">
                            <h3>Messages</h3>
                        </div>

                        <div class="large-3 columns messagesArrow">
                            <a class="small bottom messagesArrow" onclick="websocketclient.render.toggle('messages');">
                                <div class="icon-arrow-chevron"></div>
                            </a>
                        </div>

                        <div class="large-12 columns" id="messagesMain">

                            <!-- Grid Example -->
                            <div class="row panel">
                                <div class="large-12 columns">
                                    <form class="custom">
                                        <!--<div class="row">-->
                                        <!--<div class="large-10 columns">-->
                                        <!--<label>Filter</label>-->
                                        <!--<input id="filterString" type="text">-->
                                        <!--</div>-->

                                        <!--<div class="large-2 columns">-->
                                        <!--<a class="small button" id="filterButton"-->
                                        <!--onclick="websocketclient.filter($('#filterString').val())">Filter</a>-->
                                        <!--</div>-->
                                        <!--</div>-->

                                    </form>
                                    <div class="row">
                                        <ul id="messEdit" class="disc">

                                        </ul>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>

                    <div class="columns large-4">

                        <div class="large-8 columns subTop">
                            <h3>Subscriptions</h3>
                        </div>

                        <div class="large-3 columns subArrow">
                            <a class="small bottom subArrow" onclick="websocketclient.render.toggle('sub');">
                                <div class="icon-arrow-chevron"></div>
                            </a>
                        </div>
                        <div class="large-12 columns" id="subMain">
                            <div class="row panel">
                                <div class="large-12 columns">

                                    <!-- <a id="addSubButton" href="#data" class="small button addSubButton">Add New Topic Subscription</a> -->

                                    <div style="display:none">
                                        <div id="data">
                                            <form class="custom">
                                                <div class="row large-12 columns">
                                                    <div class="large-4 columns">
                                                        <label>Color</label>
                                                        <input class="color" id="colorChooser" type="hidden">
                                                    </div>
                                                    <div class="large-5 columns">
                                                        <label for="QoSInput">QoS</label>
                                                        <select id="QoSInput" class="small">
                                            <option>2</option>
                                            <option>1</option>
                                            <option>0</option>
                                        </select>
                                                    </div>
                                                    <div class="large-3 columns">
                                                        <a class="small button" id="subscribeButton" onclick="if(websocketclient.subscribe($('#subscribeTopic').val(),parseInt($('#QoSInput').val()),$('#colorChooser').val().substring(1))){$.fancybox.close();}">Subscribe</a>
                                                    </div>
                                                </div>
                                                <div class="row large-12 columns">
                                                    <div class="large-12 columns">
                                                        <label>Topic</label>
                                                        <input id="subscribeTopic" type="text" value="testtopic/#">
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>

                                    <ul id="innerEdit" class="disc">

                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script src="js/jquery_min.js"></script>
            <script src="js/jquery_ui_min.js"></script>
            <script src="js/lodash_min.js"></script>
            <script src="js/fancybox_min.js"></script>

            <script src="js/foundation.js"></script>
            <script src="js/foundation_forms_min.js"></script>
            <script src="js/modernizr.js"></script>
            <script src="js/moment.js"></script>
            <script src="js/jquery.minicolors.min.js"></script>
            <script src="js/mqttws31.js"></script>
            <script src="js/encoder.js"></script>
            <script src="js/app.js"></script>
            <script src="config.js"></script>

            <script>
                function randomString(length) {
                    var text = "";
                    var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
                    for (var i = 0; i < length; i++)
                        text += possible.charAt(Math.floor(Math.random() * possible.length));
                    return text;
                }

                $(document).foundation();
                $(document).ready(function() {

                    $('#urlInput').val(websocketserver);
                    $('#portInput').val(websocketport);
                    $('#clientIdInput').val('clientId-' + randomString(10));

                    $('#colorChooser').minicolors();

                    $("#addSubButton").fancybox({
                        'afterShow': function() {
                            var rndColor = websocketclient.getRandomColor();
                            $("#colorChooser").minicolors('value', rndColor);
                        }
                    });

                    websocketclient.render.toggle('publish');
                    websocketclient.render.toggle('messages');
                    websocketclient.render.toggle('sub');
                });
            </script>
        </body>
    </div>

    <script>
        var allDataPoints = [];
    </script>



    <script>
        function chartFill(topic, j, count) {

            var dataPoints1 = [];
            var dataPoints2 = [];

            allDataPoints.push(dataPoints1);
            allDataPoints.push(dataPoints2);

            // var dataPoints3 = [];
            // var dataPoints4 = [];
            // var dataPoints5 = [];
            // var dataPoints6 = [];
            console.log("naaaaaaaaaaaaaaaaaaaaaaaaaaame :");
            console.log(userSubNameArray);

            console.log("toooooooooooooooooooooooooopic :");
            console.log(userSubTopicArrayMain);


            var chart = new CanvasJS.Chart("" + j + "/chart", {
                zoomEnabled: true,
                title: {
                    text: userSubNameArray[j],
                    fontFamily: 'iransans'
                },
                axisX: {
                    title: "Real Time Tinaio system "
                },
                axisY: {
                    prefix: "",
                    includeZero: false
                },
                toolTip: {
                    shared: true
                },
                legend: {
                    cursor: "pointer",
                    verticalAlign: "top",
                    fontSize: 22,
                    fontColor: "dimGrey",
                    itemclick: toggleDataSeries
                },
                data: [{
                    type: "line",
                    xValueType: "dateTime",
                    yValueFormatString: "####.00",
                    xValueFormatString: "hh:mm:ss TT",
                    showInLegend: true,
                    name: "Temperature :=>",
                    dataPoints: allDataPoints[count]
                }, {
                    type: "line",
                    xValueType: "dateTime",
                    yValueFormatString: "####.00",
                    showInLegend: true,
                    name: "Humidity :=>",
                    dataPoints: allDataPoints[count + 1]
                }]
            });



            // var chart2 = new CanvasJS.Chart("chartContainer2", {
            //     zoomEnabled: true,
            //     title: {
            //         text: "space number 2"
            //     },
            //     axisX: {
            //         title: "Real Time Tinaio system "
            //     },
            //     axisY: {
            //         prefix: "",
            //         includeZero: false
            //     },
            //     toolTip: {
            //         shared: true
            //     },
            //     legend: {
            //         cursor: "pointer",
            //         verticalAlign: "top",
            //         fontSize: 22,
            //         fontColor: "dimGrey",
            //         itemclick: toggleDataSeries
            //     },
            //     data: [{
            //         type: "line",
            //         xValueType: "dateTime",
            //         yValueFormatString: "####.00",
            //         xValueFormatString: "hh:mm:ss TT",
            //         showInLegend: true,
            //         name: "Temperature :",
            //         dataPoints: dataPoints3
            //     }, {
            //         type: "line",
            //         xValueType: "dateTime",
            //         yValueFormatString: "####.00",
            //         showInLegend: true,
            //         name: "Humidity :",
            //         dataPoints: dataPoints4
            //     }]
            // });



            // var chart3 = new CanvasJS.Chart("chartContainer3", {
            //     zoomEnabled: true,
            //     title: {
            //         text: "space number 3"
            //     },
            //     axisX: {
            //         title: "Real Time Tinaio system "
            //     },
            //     axisY: {
            //         prefix: "",
            //         includeZero: false
            //     },
            //     toolTip: {
            //         shared: true
            //     },
            //     legend: {
            //         cursor: "pointer",
            //         verticalAlign: "top",
            //         fontSize: 22,
            //         fontColor: "dimGrey",
            //         itemclick: toggleDataSeries
            //     },
            //     data: [{
            //         type: "line",
            //         xValueType: "dateTime",
            //         yValueFormatString: "####.00",
            //         xValueFormatString: "hh:mm:ss TT",
            //         showInLegend: true,
            //         name: "Temperature :",
            //         dataPoints: dataPoints5
            //     }, {
            //         type: "line",
            //         xValueType: "dateTime",
            //         yValueFormatString: "####.00",
            //         showInLegend: true,
            //         name: "Humidity :",
            //         dataPoints: dataPoints6
            //     }]
            // });




            function toggleDataSeries(e) {
                if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
                    e.dataSeries.visible = false;
                } else {
                    e.dataSeries.visible = true;
                }
                chart.render();

            }

            var updateInterval = 5000;
            // initial value
            var yValue1 = 30;
            var yValue2 = 605;
            var yValue3 = 30;
            var yValue4 = 605;
            var yValue5 = 30;
            var yValue6 = 605;

            var time = new Date;

            var now = new Date();
            time.setHours(now.getHours().toString(10));
            time.setMinutes(now.getMinutes().toString(10));
            time.setSeconds(now.getSeconds().toString(10));
            time.setMilliseconds(00);

            function updateChart(count) {
                console.log(allDataPoints)
                count = count || 1;
                var deltaY1, deltaY2;
                for (var i = 0; i < count; i++) {
                    time.setTime(time.getTime() + updateInterval);

                    // adding random value and rounding it to two digits. 

                    if (false) {
                        yValue1 = 40
                        yValue2 = 50
                            // yValue3 = 40
                            // yValue4 = 50
                    } else {

                        yValue1 = parseInt(document.getElementById("" + topic + "/temp").innerHTML)

                        yValue2 = parseInt(document.getElementById("" + topic + "/humid").innerHTML)
                            // yValue3 = 10
                            // yValue4 = 20
                            // yValue5 = 30
                            // yValue6 = 40

                    }

                    // pushing the new values
                    dataPoints1.push({
                        x: time.getTime(),
                        y: yValue1
                    });
                    dataPoints2.push({
                        x: time.getTime(),
                        y: yValue2
                    });

                    // dataPoints3.push({
                    //     x: time.getTime(),
                    //     y: yValue3
                    // });
                    // dataPoints4.push({
                    //     x: time.getTime(),
                    //     y: yValue4
                    // });

                    // dataPoints5.push({
                    //     x: time.getTime(),
                    //     y: yValue5
                    // });
                    // dataPoints6.push({
                    //     x: time.getTime(),
                    //     y: yValue6
                    // });

                }

                // updating legend text with  updated with y Value 
                console.log("yValue1 : " + yValue1)
                console.log("yValue2 : " + yValue2)

                chart.options.data[0].legendText = " Temperature :  " + yValue1; //ok
                chart.options.data[1].legendText = " Humidity :  " + yValue2; //ok
                chart.render();


            }
            // generates first set of dataPoints 
            updateChart(100);
            setInterval(function() {
                updateChart()
            }, updateInterval);

        }

        function fillCharts() {

            for (var j = 0, count = 0; j < userSubTopicArrayMain.length; j = j + 1, count += 2) {
                chartFill(userSubTopicArrayMain[j], j, count);
            }
        }
    </script>

    <script>
        function simplified1() {
            document.getElementById("afterLogin").style.visibility = "hidden"
            document.getElementById("afterLogin").style.display = "none"

            document.getElementById("simplified1").style.visibility = "visible"
            document.getElementById("simplified1").style.display = "block"
        }

        function backToGroups() {

            document.getElementById("simplified1").style.visibility = "visible"
            document.getElementById("simplified1").style.display = "block"

            document.getElementById("simplified2").style.visibility = "hidden"
            document.getElementById("simplified2").style.display = "none"

        }
    </script>



    <style>
        .card {
            font-family: 'iransans';
            box-shadow: 0 4px 8px 0 rgba(16, 221, 204, 0.911);
            transition: 0.3s;
            margin-left: 1%;
            margin-right: 1%;
            margin-bottom: 1%;
            width: 47%;
            float: right;
        }
        
        .maincards {
            font-family: 'iransans';
            box-shadow: 0 4px 8px 0 rgba(19, 151, 140, 0.911);
            transition: 0.3s;
            padding: 10%;
            border-radius: 2%;
            margin-left: 1%;
            margin-right: 1%;
            margin-bottom: 4%;
            width: 47%;
            float: left;
        }
        
        .logincard {
            font-family: 'iransans';
            box-shadow: 0 16px 16px 0 rgba(12, 177, 62, 0.911);
            transition: 0.3s;
            padding: 2%;
            margin-left: 20%;
            margin-top: 2%;
            margin-bottom: 3%;
            width: 60%;
            float: left;
            background-image: url('assets/cloud.gif');
        }
        
        .mainCard {
            font-family: 'iransans';
            box-shadow: 0 4px 8px 0 rgba(13, 216, 74, 0.911);
            transition: 0.3s;
            width: 50%;
            margin-right: 20%;
            margin-left: 25%;
            margin-bottom: 5%;
            float: left;
            border-radius: 4%;
        }
        
        .card:hover {
            box-shadow: 0 8px 16px 0 rgba(248, 0, 0, 0.904);
        }
        
        .maincards:hover {
            box-shadow: 0 8px 16px 0 rgba(248, 0, 0, 0.904);
        }
        
        .container {
            font-family: 'iransans';
            padding: 2px 16px;
            text-align: center;
            align-content: center;
        }
    </style>

    <div id="simplified2" style="visibility: hidden ; display: none;">


        <div>
            <div id="mySidepanel2" class="sidepanel">
                <a style="float: right;padding: 0; " href="javascript:void(0)" class="closebtn" onclick="closeNav2()">×</a>
                <a style="text-align: center;" onclick="showUpdateModal()">به روزرسانی</a>
                <a style="text-align: center;" onclick="showRestartModal()">بازیابی</a>
                <a style="text-align: center;" onclick="showSettings()">تنظیمات</a>
                <a style="text-align: center;" href=" ">خروج از حساب</a>
            </div>
            <div style="background-color:rgb(0, 236, 253) ;margin-bottom: 2%;">
                <a class="openbtn" onclick="openNav2()">گزینه ها ☰ </a>
                <a class="openbtn2" onclick="backToGroups()"> بازگشت به گروه ها </a>
                <img id="headerlogo" style="height: 110px;width:300px;" src="assets/logo.png">
            </div>

        </div>

        <script>
            function openNav2() {
                document.getElementById("mySidepanel2").style.visibility = "visible";
                document.getElementById("mySidepanel2").style.width = "250px";

            }

            function closeNav2() {
                document.getElementById("mySidepanel2").style.visibility = "hidden";
                document.getElementById("mySidepanel2").style.width = "0";
            }
        </script>

        <!-- <div id="mainDiv" style="font-family: 'iransans';">
            <div class="mainCard">
                <div class="container">
                    <h2 style="color: rgb(78, 131, 24) ; text-align: center; font-family: 'iransans';" id="tTemp2">میانگین دما : 25 </h2>
                    <h2 style="color: rgb(14, 97, 124) ; text-align: center; font-family: 'iransans';" id="tHumid2">میانگین رطوبت : %40 </h2>
                    <h2 style="color: rgb(255, 251, 5) ; text-align: center; font-family: 'iransans';" id="tLight2">میانگین نور : %40 </h2>
                </div>
            </div>
        </div> -->

    </div>

    <div id="simplified1" style="visibility: hidden ; display: none;">


        <div>
            <!-- <div class="navbar">
                <img id="headerlogo" style="height: 110px;width:300px;" src="assets/logo.png">

                <a style="text-align: center;margin-right: 1%;" href="#">به روزرسانی محصولات</a>
                <a href="#" style="text-align: center;margin-right: 1%;">راه اندازی مجدد</a>
                <a style="text-align: center;margin-right: 1%;" href="http://tinaio.ir/customerLogin">خروج از حساب کاربری</a>

            </div> -->

            <style>
                .mobile-container {
                    max-width: 480px;
                    margin: auto;
                    background-color: rgb(10, 165, 10);
                    ;
                    height: 500px;
                    color: white;
                    border-radius: 10px;
                }
                
                .topnav {
                    overflow: hidden;
                    background-color: rgb(10, 165, 10);
                    ;
                    position: relative;
                }
                
                .topnav #myLinks {
                    display: none;
                }
                
                .topnav a {
                    color: white;
                    padding: 14px 16px;
                    text-decoration: none;
                    font-size: 17px;
                    display: block;
                }
                
                .topnav a.icon {
                    background: rgb(10, 165, 10);
                    ;
                    display: block;
                    position: absolute;
                    right: 1%;
                    top: 1%;
                }
                
                .topnav a:hover {
                    background-color: rgb(255, 255, 255);
                    color: rgb(10, 165, 10);
                }
                
                .active {
                    background-color: #4CAF50;
                    color: white;
                }
            </style>

            <script>
                function myFunction() {
                    var x = document.getElementById("myLinks");
                    if (x.style.display === "block") {
                        x.style.display = "none";
                    } else {
                        x.style.display = "block";
                    }
                }
            </script>

            <!-- <div class="topnav">
                <img id="headerlogo" style="height: 110px;width:300px;" src="assets/logo.png">
                <div id="myLinks">
                    <a style="text-align: right; direction:rtl ;" href="#news">به روزرسانی محصولات</a>
                    <a href="#contact" style="text-align: right; direction:rtl ;">بازیابی محصولات</a>
                    <a style="text-align: right; direction:rtl ;" href="#about">خروج از حساب کاربری</a>
                </div>
                <a href="javascript:void(0);" class="icon" onclick="myFunction()">
                    <i class="fa fa-bars"></i>
                </a>
            </div> -->
            <style>
                .sidepanel {
                    width: 0;
                    position: fixed;
                    z-index: 1;
                    height: 100%;
                    top: 0;
                    right: 0;
                    background-color: rgba(24, 145, 30, 0.95);
                    overflow-x: hidden;
                    transition: 0.5s;
                    padding-top: 50px;
                    padding-bottom: 20px;
                }
                
                .sidepanel a {
                    padding: 8px 8px 8px 32px;
                    text-decoration: none;
                    font-size: 25px;
                    color: #ffffff;
                    display: block;
                    transition: 0.3s;
                }
                
                .sidepanel a:hover {
                    color: #ffffff;
                }
                
                .sidepanel .closebtn {
                    position: absolute;
                    top: 0;
                    right: 10px;
                    font-size: 36px;
                }
                
                .openbtn {
                    font-size: 25px;
                    cursor: pointer;
                    background-color: rgb(0, 236, 253);
                    color: white;
                    margin-top: 3%;
                    right: 2%;
                    margin-right: 1%;
                    top: 3.5%;
                    float: right;
                }
                
                .openbtn2 {
                    font-size: 25px;
                    width: auto;
                    cursor: pointer;
                    background-color: rgb(24, 145, 30);
                    color: white;
                    margin-top: 3%;
                    right: 2%;
                    margin-right: 1%;
                    top: 3.5%;
                    float: right;
                }
                
                .openbtn:hover {
                    background-color: rgb(24, 145, 30);
                }
            </style>

            <div id="mySidepanel" class="sidepanel">
                <a style="float: right;padding: 0; " href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
                <a style="text-align: center;" onclick="showUpdateModal()">به روزرسانی</a>
                <a style="text-align: center;" onclick="showRestartModal()">بازیابی</a>
                <a style="text-align: center;" onclick="showSettings()">تنظیمات</a>
                <a style="text-align: center;" href="">خروج از حساب</a>
            </div>
            <div style="background-color:rgb(0, 236, 253) ;margin-bottom: 2%;">
                <a class="openbtn" onclick="openNav()">گزینه ها ☰ </a>
                <img id="headerlogo" style="height: 110px;width:300px;" src="assets/logo.png">
            </div>
            <script>
                function openNav() {
                    document.getElementById("mySidepanel").style.visibility = "visible";
                    document.getElementById("mySidepanel").style.width = "250px";

                }

                function closeNav() {
                    document.getElementById("mySidepanel").style.visibility = "hidden";
                    document.getElementById("mySidepanel").style.width = "0";
                }
            </script>


        </div>


        <!-- <div id="mainDiv">
            <div class="mainCard">
                <div class="container">
                    <h2 style="color: rgb(78, 131, 24) ; text-align: center; font-family: 'iransans'; " id="tTemp1">میانگین دما : 25 </h2>
                    <h2 style="color: rgb(102, 140, 153) ; text-align: center; font-family: 'iransans';" id="tHumid1">میانگین رطوبت : %40 </h2>
                    <h2 style="color: rgb(255, 251, 5) ; text-align: center; font-family: 'iransans';" id="tLight1">میانگین نور : %50 </h2>
                </div>
            </div>
        </div> -->

    </div>


    <script>
        function showChart(event) {
            console.log("id of chart : " + event.target.id)
            var idOfChart = event.target.id.split("/")
            console.log("id of chart that i click : " + idOfChart)
            var idOfChartToShow = idOfChart[0]
            console.log("idddddddddddddddddd    " + idOfChartToShow)
            for (var p = 0; p < (userSubTopicArrayMain.length); p = p + 1) {
                console.log("thhhhhhos :     " + "" + p + "/chart")
                document.getElementById("" + p + "/chart").style.visibility = "hidden";
                document.getElementById("" + p + "/chart").style.display = "none";
            }
            document.getElementById("" + idOfChartToShow + "/chart").style.visibility = "visible";
            document.getElementById("" + idOfChartToShow + "/chart").style.display = "block";

            modal.style.display = "block";

        }

        function showSubGroups(event) {
            console.log("ajjjjjjjjjjjjjjjjjjjjaaaaaaaaaaaaaaaaaaaab")
            var idOfDiv = event.target.id.split("/");
            var idOfSubGroupToShow = idOfDiv[0];
            console.log(groupSubNameArray);
            console.log(uniqueGropuNameArray);

            for (var p = 0; p < (userSubNameArray.length); p = p + 1) {
                console.log(groupSubNameArray[p])
                console.log(uniqueGropuNameArray[idOfSubGroupToShow]);
                if (groupSubNameArray[p] == uniqueGropuNameArray[idOfSubGroupToShow]) {
                    console.log("eeeeeeeeeeeeeeeeeeeey")
                    document.getElementById("" + p + "/chartDiv").style.visibility = "visible";
                    document.getElementById("" + p + "/chartDiv").style.display = "block";
                } else {
                    document.getElementById("" + p + "/chartDiv").style.visibility = "hidden";
                    document.getElementById("" + p + "/chartDiv").style.display = "none";
                }


            }

            document.getElementById("simplified1").style.display = "none"
            document.getElementById("simplified1").style.visibility = "hidden"
            document.getElementById("simplified2").style.display = "block"
            document.getElementById("simplified2").style.visibility = "visible"

        }

        function sendOnOff(event) {
            document.getElementById("" + event.target.id + "/checkDiv").style.visibility = "hidden"
            setTimeout(function() {
                console.log("sssssssssssssssssssendiiiiiiiiiiiiing")
                console.log("chie : " + document.getElementById(event.target.id).checked)
                var checked = document.getElementById("" + event.target.id).checked
                websocketclient.publish("" + event.target.id, "" + checked, parseInt("0"), false)

            }, 100);

            setTimeout(function() {
                console.log("cooooontrollingggggg")
                var visibility = document.getElementById("" + event.target.id + "/checkDiv").style.visibility
                console.log(visibility)
                if (visibility == "hidden") {
                    document.getElementById("" + event.target.id).checked = !document.getElementById("" + event.target.id).checked
                    document.getElementById("" + event.target.id + "/checkDiv").style.visibility = "visible"
                    alert("اتصال برقرار نیست ، دستور شما ارسال نشد.")
                }

            }, 1200);

        }
    </script>



    <style>
        /* The Modal (background) */
        
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }
        /* Modal Content */
        
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        /* The Close Button */
        
        .close {
            color: #fa0a0a;
            margin-right: 3%;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>


    <div id="myModal" class="modal">
        <span class="close">&times;</span>
        <div class="modal-content">

            <div id="mainCharts">


            </div>

        </div>
    </div>


    <script>
        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the button that opens the modal

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal.style.display = "none";
        }

        var menu = document.getElementById("mySidepanel");

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal) {
                menu.style.display = "none";
            }

        }
    </script>

    <!-- footer -->
    <div id="footer" class="footer">
        <h6 style="color: #FFF;direction: rtl;font-family: 'iransans';">سیستم بلادرنگ تینایو | کلیه ی حقوق محفوظ است.</h6>
    </div>


    <!-- MENU -->
    <style>
        .navbar {
            float: right;
            width: 100%;
            overflow: hidden;
            background-color: rgb(14, 180, 36);
        }
        
        .navbar a {
            float: right;
            font-size: 16px;
            color: white;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
        }
        
        .dropdown {
            margin-right: 20%;
            float: right;
            overflow: hidden;
        }
        
        .dropdown .dropbtn {
            font-size: 16px;
            border: none;
            outline: none;
            color: rgb(255, 255, 255);
            background-color: inherit;
            font-family: inherit;
            margin: 0%;
        }
        
        .navbar a:hover,
        .dropdown:hover .dropbtn {
            background-color: red;
        }
        
        .dropdown-content {
            display: none;
            margin-right: 2%;
            background-color: #f9f9f9;
            min-width: 160px;
            z-index: 1;
        }
        
        .dropdown-content a {
            float: none;
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: right;
        }
        
        .dropdown-content a:hover {
            background-color: #ddd;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
    </style>

    <!-- Error handler -->

    <style>
        /* The Modal (background) */
        
        .modal2 {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }
        /* Modal Content */
        
        .modal2-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        /* The Close Button */
        
        .close2 {
            color: #aaaaaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close2:hover,
        .close2:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>


    <!-- script -->
    <script>
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close2")[0];
        var modal2 = document.getElementById("error");
        // When the user clicks on <span> (x), close the modal
        span.onclick = function() {
            modal2.style.display = "none";
        }

        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
            if (event.target == modal2) {
                modal2.style.display = "none";
            }
        }
    </script>

    <div id="error" class="modal2">
        <div id="errorHandler" class="modal2-content">
            <header style="font-family: 'iransans';direction: rtl;text-align: center;align-content: center;"> اوپس! خطایی رخ داد! </header>
            <h3 id="errmsg" style="font-family: 'iransans';direction: rtl;text-align: center;align-content: center;"></h3>
            <button class="button" onclick="window.location.href = 'http://tinaio.ir/customerLogin'" ;>تلاش دوباره</button>
        </div>
    </div>



    <!-- START OF MODAL UPDATE -->
    <!--  UPDATE MODAL OF TINAIO REALTIME SYSTEM    -->
    <style>
        .modalUpdate {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .modal-content-update {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #45a110;
            width: 80%;
        }
        
        .closeUpdate {
            color: #fa0909;
            margin-right: 3%;
            float: right;
            font-size: 40px;
            font-weight: bold;
        }
        
        .closeUpdate:hover,
        .closeUpdate:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>


    <div id="myModalUpdate" class="modalUpdate">
        <span class="closeUpdate" onclick="closeUpdate()">&times;</span>
        <div class="modal-content-update">
            <div id="updateModal">
                <h2 style="align-content: center;text-align: center;direction: rtl;font-family: 'iransans';">به روزرسانی محصولات تینایو</h2>
                <h4 id="msgUpdate" style="align-content: center;text-align: center;direction: rtl;font-family: 'iransans';">با کلیک بر روی گزینه ی زیر محصولات تمام گروه های شما به آخرین نسخه ی پایدار به روزرسانی خواهند شد.</h4>
                <button style="direction: rtl;" onclick="updateMeCommand()" class="button" id="updateBTN">به روزرسانی</button>
            </div>

        </div>
    </div>


    <script>
        var modalUpdate = document.getElementById("myModalUpdate");

        function closeUpdate() {
            modalUpdate.style.display = "none"
            document.getElementById("msgUpdate").innerText = "مدت زیادی از آخرین به روزرسانی توسط شما نگذشته است. دوباره بعدا امتحان کنید."
            document.getElementById("msgUpdate").style.color = "#000"
        }


        function showUpdateModal() {
            closeNav2();
            closeNav();
            modalUpdate.style.display = "block"

        }

        function updateMeCommand() {
            websocketclient.publish(USERNAME + "/update", "updateMe", parseInt("0"), false)
            document.getElementById("msgUpdate").innerText = "دستور به روزرسانی برای محصولات شما با موفقیت ارسال شد."
            document.getElementById("msgUpdate").style.color = "#45a110"
            document.getElementById("updateBTN").innerText = "متوجه شدم."
            document.getElementById("updateBTN").onclick = closeUpdate;
        }
    </script>
    <!--  UPDATE MODAL OF TINAIO REALTIME SYSTEM    -->
    <!-- END OF UPDATE -->


    <!-- START OF MODAL RESTART -->
    <!-- RESTART MODAL FOR TINAIO REALTIME SYSTEMS -->
    <style>
        .modalRestart {
            display: none;
            position: fixed;
            z-index: 1;
            padding-top: 100px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .modal-content-Restart {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
        }
        
        .closeRestart {
            color: #fa0a0a;
            margin-right: 3%;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .closeRestart:hover,
        .closeRestart:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
    </style>


    <div id="restartModal" class="modalRestart">
        <span class="closeRestart">&times;</span>
        <div class="modal-content-Restart">

            <div id="restartModal">
                <h2 style="align-content: center;text-align: center;direction: rtl;font-family: 'iransans';">بازیابی محصولات تینایو</h2>
                <h4 id="msgRestart" style="align-content: center;text-align: center;direction: rtl;font-family: 'iransans';">با کلیک بر روی گزینه ی زیر تمام محصولات شما به حالت اولیه (قبل از راه اندازی) باز میگردند.</h4>
                <button style="direction: rtl;" onclick="restartMeCommand()" class="button" id="restartBTN">بازیابی</button>
            </div>

        </div>
    </div>


    <script>
        var modalRestart = document.getElementById("restartModal");

        function showRestartModal() {
            closeNav2();
            closeNav();
            modalRestart.style.display = "block"

        }

        function closeRestart() {
            modalRestart.style.display = "none"
        }

        function restartMeCommand() {
            websocketclient.publish(USERNAME + "/restart", "updateMe", parseInt("0"), false)
            document.getElementById("msgRestart").innerText = "دستور بازیابی برای محصولات شما با موفقیت ارسال شد."
            document.getElementById("msgRestart").style.color = "#45a110"
            document.getElementById("restartBTN").innerText = "متوجه شدم."
            document.getElementById("restartBTN").onclick = closeRestart;
        }

        var menu1 = document.getElementById("mySidepanel");
        var menu2 = document.getElementById("mySidepanel2");

        window.onclick = function(event) {
            if (event.target == modalUpdate) {
                modalUpdate.style.display = "none";
                if (document.getElementById("updateBTN").innerText == "متوجه شدم.") {
                    document.getElementById("msgUpdate").innerText = "مدت زیادی از آخرین به روزرسانی توسط شما نگذشته است. دوباره بعدا امتحان کنید."
                    document.getElementById("msgUpdate").style.color = "#000"
                }
            }
            if (event.target == modalRestart) {
                modalRestart.style.display = "none";
            }
            if (event.target == modal) {
                modal.style.display = "none";
            }
            if (event.target == modal2) {
                modal2.style.display = "none";
            }

        }
    </script>

    <!-- END OF RESTART MODAL -->
    <!-- END OF RESTART MODAL TINAIO REALTIME SYS -->

</body>



</html>